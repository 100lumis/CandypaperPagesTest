<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Candypaper - Leaderboard</title>
  <link rel="stylesheet" href="Candy3.css" />
  <link rel="icon" type="image/x-icon" href="favicon.ico" />  
  <style>
    #leaderboardTable {
      position: absolute;
      top: 180px;
      left: 5px;
      width: 400px;
      background: white;
      border-collapse: collapse;
      font-family: Rockwell Extra Bold;
      border: 2px solid #d1478e;
      z-index: 1000;
    }

    #leaderboardTable th,
    #leaderboardTable td {
      padding: 8px;
      border: 1px solid #d1478e;
      text-align: center;
    }

    #leaderboardTable thead {
      background: #d1478e;
      color: white;
    }

    #leaderboardTable tr.highlight {
      background-color: #f8d7da;
    }

    #leaderboardTitle {
      position: absolute;
      top: 140px;
      left: 110px;
      font-family: Rockwell Extra Bold;
      color: #000000;
      font-size: 28px;
      margin: 0;
    }
/* napin style */
    #nappi {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 17px;
      position: absolute;
      bottom: -30px;
      left: 20px;
      width: 200px;
      height: 40px;
    }

    .styled1 {
      border: 0;
      line-height: 2.5;
      padding: 0 20px;
      font-size: 1rem;
      text-align: center;
      color: white;
      text-shadow: 1px 1px 1px black;
      border-radius: 5px;
      background-image: linear-gradient(to top right, rgb(255, 20, 147), rgb(255, 20, 147) 30%, transparent);
      box-shadow:
        inset 2px 2px 3px rgb(255 255 255 / 0.6),
        inset -2px -2px 3px rgb(0 0 0 / 0.6);
      cursor: pointer;
    }

    .styled1:hover {
      background-color: salmon;
    }

    .styled1:active {
      box-shadow:
        inset -2px -2px 3px rgb(255 255 255 / 0.6),
        inset 2px 2px 3px rgb(0 0 0 / 0.6);
    }
  </style>
</head>
<body>

  <h2 id="leaderboardTitle">Leaderboard</h2>
  <table id="leaderboardTable">
    <thead>
/* pelaajan nimi, pisteet ja pelin loputtua aika */
      <tr>
        <th>Nimi</th>
        <th>Pisteet</th>
        <th>Aika (s)</th>
      </tr>
    </thead>
    <tbody id="leaderboardBody"></tbody>
  </table>
/* nappi poistoa varten */
  <button id="nappi" onclick="clearLeaderboard()" class="favorite styled1">Tyhjennä leaderboard</button>

  <script>
    let playerName = "";
    let leaderboard = [];
    let playerEntry = null;

    window.onload = () => {
      playerName = prompt("Anna nimesi:") || "Anonyymi";

      leaderboard = JSON.parse(localStorage.getItem("candypaperLeaderboard")) || [];
/* Poista vanha entry samannimiseltä pelaajalta */

      leaderboard = leaderboard.filter(e => e.name !== playerName);
/* Lisää uusi pelaaja (score ja time 0 alussa) */

      playerEntry = { name: playerName, score: 0, time: 0 };
      leaderboard.push(playerEntry);
 /* Järjestä ja ota top 10 */

      leaderboard.sort((a, b) => {
        if (b.score !== a.score) return b.score - a.score;
        return a.time - b.time;
      });

      leaderboard = leaderboard.slice(0, 10);
      updateLeaderboardUI();
    };
// --- Leaderboard update and save ---
    function updateLeaderboardUI() {
      const tbody = document.getElementById("leaderboardBody");
      tbody.innerHTML = "";
 /* Järjestä leaderboard pisteiden mukaan (laskevasti), ajan mukaan (pienin ensin) */
      leaderboard.sort((a, b) => {
        if (b.score !== a.score) return b.score - a.score;
        return a.time - b.time;
      });

      leaderboard.forEach(entry => {
        const tr = document.createElement("tr");
        if (entry.name === playerName) tr.classList.add("highlight");

        const tdName = document.createElement("td");
        tdName.textContent = entry.name;

        const tdScore = document.createElement("td");
        tdScore.textContent = entry.score;

        const tdTime = document.createElement("td");
        tdTime.textContent = entry.time > 0 ? entry.time : "-";

        tr.appendChild(tdName);
        tr.appendChild(tdScore);
        tr.appendChild(tdTime);

        tbody.appendChild(tr);
      });
    }

    function clearLeaderboard() {
      if (confirm("Haluatko varmasti tyhjentää leaderboardin?")) {
        localStorage.removeItem("candypaperLeaderboard");
        leaderboard = [];
        updateLeaderboardUI();
      }
    }
  </script>

</body>
</html>
